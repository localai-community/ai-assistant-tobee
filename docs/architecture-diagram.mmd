graph TD
    A["ğŸ‘¤ User"] --> B["ğŸ’¬ Chainlit Frontend"]
    B --> C["ğŸ”„ WebSocket"]
    C --> D["ğŸ—ï¸ FastAPI Backend"]
    
    D --> E["ğŸ¤– Chat Engine"]
    E --> F["ğŸ“¡ MCP Client"]
    F --> G["ğŸ”§ MCP Tools"]
    E --> R["ğŸ” RAG System"]
    
    E --> H["ğŸ§  LLM Provider<br/>(Ollama/OpenAI)"]
    
    subgraph "ğŸ¯ Chainlit Features"
        I["ğŸ“¤ File Uploads"]
        J["âš¡ Streaming Responses"]
        K["ğŸ”˜ Action Buttons"]
        L["ğŸ‘¥ User Sessions"]
        M["ğŸ¨ Rich Components"]
        N2["ğŸ“Š Document Viewer"]
    end
    
    subgraph "ğŸ”§ MCP Tools Integration"
        N["ğŸ“ File Operations"]
        O["ğŸŒ Web Search"]
        P["ğŸ’» Code Execution"]
        Q["ğŸ“Š Data Analysis"]
        R2["ğŸ“„ Document Analysis"]
    end
    
    subgraph "ğŸ” RAG Components"
        S["ğŸ“ Document Processor"]
        T["ğŸ§® Vector Embeddings"]
        U["ğŸ—ƒï¸ Vector Database<br/>(Chroma/Pinecone)"]
        V["ğŸ” Similarity Search"]
        W["ğŸ“‹ Context Retrieval"]
    end
    
    B --> I
    B --> J
    B --> K
    B --> L
    B --> M
    B --> N2
    
    G --> N
    G --> O
    G --> P
    G --> Q
    G --> R2
    
    I --> S
    R --> S
    S --> T
    T --> U
    R --> V
    V --> U
    V --> W
    W --> E
    
    style B fill:#e1f5fe
    style E fill:#f3e5f5
    style F fill:#fff3e0
    style R fill:#f1f8e9 